(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1UPd":function(t,e,i){"use strict";i("V6WD")},"3Ns0":function(t,e,i){"use strict";var n=i("Gm9B"),s=i("JPo+"),a={components:{ActionBar:()=>Promise.all([i.e(0),i.e(6)]).then(i.bind(null,"KU0p")),TagCloud:n.a},props:{painting:{type:Object,required:!0}},methods:{addTag:()=>s.a,getTags(){return this.painting.tags?this.painting.tags:[]}}},r=(i("VFI7"),i("KHd+")),o=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-layout"},[e("div",{staticClass:"card-layout__header"},[t.painting.cover_image?e("g-image",{attrs:{src:t.painting.cover_image,alt:t.painting.paintingLabel?t.painting.paintingLabel+" - Cover image":"Artwork cover image",width:"770",height:"380",loading:"lazy"}}):t._e()],1),e("div",{staticClass:"card-layout__content"},[e("h2",{staticClass:"card-layout__title"},[t._v(t._s(t.painting.paintingLabel))]),e("div",[t._v("Year: "+t._s(t.painting.year))]),e("div",[t._v("Collection: "+t._s(t.painting.locationLabel))]),e("div",[t._v("Material: "+t._s(t.painting.materials))]),e("TagCloud",{staticClass:"card-layout__tags",attrs:{event:t.addTag(),tags:t.getTags()}}),e("ActionBar",{staticClass:"card-layout__actions",attrs:{painting:t.painting}})],1),e("g-link",{staticClass:"card-layout__link_to_painting",attrs:{to:t.painting.path}})],1)}),[],!1,null,null,null);e.a=o.exports},Gm9B:function(t,e,i){"use strict";var n={props:{event:{type:String,required:!0},tags:{type:Array,required:!0}},methods:{emitEvent(t){this.$eventBus.$emit(this.event,t)}}},s=(i("1UPd"),i("KHd+")),a=Object(s.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tag-filter"},t._l(t.tags,(function(i,n){return e("button",{key:n,staticClass:"action-button",attrs:{role:"button","aria-label":"Filter by "+i},on:{click:function(e){return e.preventDefault(),t.emitEvent(i)}}},[e("span",[t._v("# "+t._s(i))])])})),0)}),[],!1,null,null,null);e.a=a.exports},IpRs:function(t,e,i){"use strict";i("M7vm")},M7vm:function(t,e,i){},V6WD:function(t,e,i){},VFI7:function(t,e,i){"use strict";i("hi+7")},"hi+7":function(t,e,i){},iyQ6:function(t,e,i){"use strict";i.r(e);i("6fVz"),i("kQ2C");var n=i("sRiy").a,s=(i("IpRs"),i("KHd+")),a=null,r=Object(s.a)(n,(function(){var t=this,e=t._self._c;return e("Layout",{attrs:{"show-back-link":!1,"toggle-view":t.showToggleView()}},[e("div",{staticClass:"index-content"},[e("TagCloud",{attrs:{event:t.removeTag(),tags:t.filter}}),0===t.computeCards.length?e("div",{staticClass:"empty-state"},[e("div",{staticClass:"empty-state__content"},[e("h2",{staticClass:"empty-state__title"},[t.view===t.FAVORITES?e("span",[t._v("No favorites yet")]):t.filter.length>0?e("span",[t._v("No paintings match your filters")]):e("span",[t._v("No paintings available")])]),e("p",{staticClass:"empty-state__message"},[t.view===t.FAVORITES?e("span",[t._v("Start adding paintings to your favorites to see them here.")]):t.filter.length>0?e("span",[t._v("Try removing some tags to see more paintings.")]):e("span",[t._v("There are currently no paintings to display.")])]),t.filter.length>0?e("button",{staticClass:"empty-state__button",attrs:{"aria-label":"Clear all filters"},on:{click:t.clearFilters}},[t._v("\n          Clear Filters\n        ")]):t._e()])]):e("div",{staticClass:"masonry"},t._l(t.computeCards,(function(t){return e("div",{key:t.node.id,staticClass:"cards"},[e("CardLayout",{staticClass:"card-layout",attrs:{painting:t.node}})],1)})),0)],1)])}),[],!1,null,null,null);"function"==typeof a&&a(r);e.default=r.exports},sRiy:function(t,e,i){"use strict";(function(t){i("FNk8"),i("6fVz"),i("kQ2C"),i("fVRX"),i("q0NK"),i("HnD3"),i("eaQ4"),i("waGA"),i("iwDs"),i("pOfs"),i("HlrW"),i("csNf");var n=i("JPo+"),s=i("b1t6"),a=i("sEfC"),r=i.n(a),o=i("ijCd"),l=i.n(o),c=i("TV5u"),d=i("3Ns0"),g=i("Gm9B"),u=i("xDbK");e.a={components:{CardLayout:d.a,TagCloud:g.a},data:()=>({view:s.a,filter:[],favorites:[]}),metaInfo(){var e,i;const n=Object(u.a)((null===(e=this.$page.metadata)||void 0===e?void 0:e.siteName)||"Gridsome Starter Wikidata")||"Gridsome Starter Wikidata",s=Object(u.a)((null===(i=this.$page.metadata)||void 0===i?void 0:i.siteDescription)||"A Gridsome starter showcasing Wikidata integration")||"A Gridsome starter showcasing Wikidata integration",a=`${Object(u.d)(t.env.GRIDSOME_SITE_URL)}${Object(u.c)(t.env.GRIDSOME_PATH_PREFIX)}/`,r=[];if(this.$page.paintings&&this.$page.paintings.edges&&this.$page.paintings.edges.length>0){const t=this.$page.paintings.edges[0].node;if(t.cover_image&&"string"==typeof t.cover_image){const e=Object(u.b)(t.cover_image);e&&r.push({rel:"preload",as:"image",href:e})}}return r.push({rel:"preconnect",href:"https://www.wikidata.org",crossorigin:"anonymous"}),{title:n,link:r,meta:[{name:"description",content:s},{property:"og:title",content:n},{property:"og:description",content:s},{property:"og:type",content:"website"},{property:"og:url",content:a},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:n},{name:"twitter:description",content:s}]}},created(){if(this.$eventBus.$on(n.a,this.onAddTag),this.$eventBus.$on(n.b,this.onRemoveTag),this.$eventBus.$on(n.c,this.onChangeFavorite),this.$eventBus.$on(n.d,this.onToggleView),Object(c.a)()){this.debouncedResizeAllCards=r()(this.waitForImagesAndResize.bind(this),150);let t=this;["load","resize"].forEach((function(e){window.addEventListener(e,t.debouncedResizeAllCards)}))}},mounted(){if(this.$page.paintings&&this.$page.paintings.edges&&this.$page.paintings.edges.forEach(t=>{t.node.tags=[t.node.year,t.node.locationLabel],t.node.depicts&&(t.node.tags=t.node.tags.concat(t.node.depicts.split(","))),t.node.tags=t.node.tags.filter(t=>t),t.node.tags=[...new Set(t.node.tags)]}),Object(c.a)()){let t=this;this.$nextTick(()=>{this.$nextTick(()=>{t.waitForImagesAndResize()})})}},watch:{view(){if(Object(c.a)()){let t=this;this.$nextTick(()=>{this.$nextTick(()=>{t.waitForImagesAndResize()})})}},filter(){if(Object(c.a)()){let t=this;this.$nextTick(()=>{this.$nextTick(()=>{t.waitForImagesAndResize()})})}},computeCards:{handler(){if(Object(c.a)()){let t=this;this.$nextTick(()=>{this.$nextTick(()=>{t.waitForImagesAndResize()})})}},deep:!1}},beforeDestroy(){if(this.$eventBus.$off(),Object(c.a)()&&this.debouncedResizeAllCards){let t=this;["load","resize"].forEach((function(e){window.removeEventListener(e,t.debouncedResizeAllCards)})),this.debouncedResizeAllCards.cancel()}},computed:{computeCards(){return this.$page.paintings&&this.$page.paintings.edges?this.view===s.b&&this.favorites.length>0?this.$page.paintings.edges.filter(t=>{const e=t.node.path?t.node.path.replace(/^\//,""):null;return l()(this.favorites,e)}):this.$page.paintings.edges.filter(t=>t.node.tags&&Array.isArray(t.node.tags)?t.node.tags.filter(t=>this.filter.includes(t)).length===this.filter.length:0===this.filter.length):[]}},methods:{getPaintingWithItem(t){const e=t.path?t.path.replace(/^\//,""):null;return{...t,item:e}},clearFilters(){this.filter=[]},onAddTag(t){this.filter.push(t),this.filter=[...new Set(this.filter)]},onRemoveTag(t){let e=this.filter.findIndex(e=>e===t);this.filter.splice(e,1)},onChangeFavorite(t){let e=this.favorites.findIndex(e=>e===t);-1!==e?(this.favorites.splice(e,1),0===this.favorites.length&&(this.view=s.a)):this.favorites.push(t)},onToggleView(t){this.view=t},showToggleView(){return this.favorites.length>0},removeTag:()=>n.b,resizeCard(t){if(!t)return;const e=document.getElementsByClassName("masonry")[0];if(!e)return;const i=t.querySelector(".card-layout");if(!i)return;t.style.gridRowEnd="auto",t.style.gridRowStart="auto",t.offsetHeight,i.offsetHeight;const n=window.getComputedStyle(e).getPropertyValue("gap")||window.getComputedStyle(e).getPropertyValue("grid-row-gap")||window.getComputedStyle(e).getPropertyValue("grid-gap"),s=parseInt(n)||0,a=parseInt(window.getComputedStyle(e).getPropertyValue("grid-auto-rows"))||10,r=i.getBoundingClientRect().height;if(r<=0)return void setTimeout(()=>{const e=i.getBoundingClientRect().height;if(e>0){const i=Math.ceil((e+s)/(a+s));i>0&&(t.style.gridRowEnd="span "+i)}},100);const o=Math.ceil((r+s)/(a+s));o>0&&(t.style.gridRowEnd="span "+o)},waitForImagesAndResize(){if(!Object(c.a)())return;const t=document.getElementsByClassName("cards");if(!t||0===t.length)return void this.resizeAllCards();const e=[];if(Array.from(t).forEach(t=>{const i=t.querySelector("img");i&&!i.complete&&e.push(i)}),0===e.length)return void this.resizeAllCards();let i=0;const n=()=>{i++,i===e.length&&setTimeout(()=>{this.resizeAllCards()},150)};e.forEach(t=>{t.complete?n():(t.addEventListener("load",n,{once:!0}),t.addEventListener("error",n,{once:!0}),setTimeout(n,5e3))})},resizeAllCards(){if(!Object(c.a)())return;const t=document.getElementsByClassName("cards");t&&0!==t.length&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{Array.from(t).forEach(t=>{t.style.gridRowEnd="auto",t.style.gridRowStart="auto"}),document.body.offsetHeight;const e=Array.from(t).map(t=>{const e=t.querySelector(".card-layout");return e?e.getBoundingClientRect().height:0}),i=document.getElementsByClassName("masonry")[0];if(!i)return;const n=window.getComputedStyle(i).getPropertyValue("gap")||window.getComputedStyle(i).getPropertyValue("grid-row-gap")||window.getComputedStyle(i).getPropertyValue("grid-gap"),s=parseInt(n)||0,a=parseInt(window.getComputedStyle(i).getPropertyValue("grid-auto-rows"))||10;Array.from(t).forEach((t,i)=>{const n=e[i];if(n>0){const e=Math.ceil((n+s)/(a+s));e>0&&(t.style.gridRowEnd="span "+e)}})})})})}}}}).call(this,i("8oxB"))},xDbK:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return o}));i("iKfx"),i("JxoU"),i("VJTV");function n(t,e=["http:","https:"]){if(!t||"string"!=typeof t)return!1;try{const i=new URL(t);return e.includes(i.protocol)}catch{return!1}}function s(t,e=["http:","https:"]){if(!n(t,e))return null;try{const e=new URL(t);return e.hash="",e.toString()}catch{return null}}function a(t){return t&&"string"==typeof t&&(t.startsWith("http://")||t.startsWith("https://"))&&n(t,["https:"])?t:"https://hunsalz.github.io"}function r(t){if(!t||"string"!=typeof t)return"/gridsome-starter-wikidata";let e=t.trim();return e.startsWith("/")||(e="/"+e),e=e.replace(/\.\./g,""),e=e.split("?")[0].split("#")[0],e||"/gridsome-starter-wikidata"}function o(t,e=200){if(!t||"string"!=typeof t)return"";let i=t.replace(/<[^>]*>/g,"");return i=i.replace(/[<>"']/g,""),i=i.trim().substring(0,e),i}}}]);