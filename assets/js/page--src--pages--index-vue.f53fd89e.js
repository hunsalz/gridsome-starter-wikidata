(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/q6b":function(t,e,i){},"2dNS":function(t,e,i){},"3Ns0":function(t,e,i){"use strict";var s=i("Gm9B"),n=i("JPo+"),a={components:{ActionBar:()=>Promise.all([i.e(0),i.e(6)]).then(i.bind(null,"KU0p")),TagCloud:s.a},props:{painting:{type:Object,required:!0},isFirstCard:{type:Boolean,default:!1}},methods:{addTag:()=>n.a,getTags(){return this.painting.tags?this.painting.tags:[]}}},r=(i("Cj5B"),i("KHd+")),o=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-layout"},[e("div",{staticClass:"card-layout__header"},[t.painting.cover_image?e("g-image",{attrs:{src:t.painting.cover_image,alt:t.painting.paintingLabel?t.painting.paintingLabel+" - Cover image":"Artwork cover image",width:"770",height:"380",fetchpriority:t.isFirstCard?"high":"auto",loading:t.isFirstCard?"eager":"lazy"}}):t._e()],1),e("div",{staticClass:"card-layout__content"},[e("h2",{staticClass:"card-layout__title"},[t._v(t._s(t.painting.paintingLabel))]),e("div",{staticClass:"card-layout__meta"},[e("div",[t._v("Year: "+t._s(t.painting.year))]),e("div",[t._v("Collection: "+t._s(t.painting.locationLabel))]),e("div",[t._v("Material: "+t._s(t.painting.materials))])]),e("TagCloud",{staticClass:"card-layout__tags",attrs:{event:t.addTag(),tags:t.getTags()}}),e("ActionBar",{staticClass:"card-layout__actions",attrs:{painting:t.painting}})],1),e("g-link",{staticClass:"card-layout__link_to_painting",attrs:{to:t.painting.path}})],1)}),[],!1,null,null,null);e.a=o.exports},Cj5B:function(t,e,i){"use strict";i("/q6b")},Gm9B:function(t,e,i){"use strict";var s={props:{event:{type:String,required:!0},tags:{type:Array,required:!0}},methods:{emitEvent(t){this.$eventBus.$emit(this.event,t)}}},n=(i("wE6H"),i("KHd+")),a=Object(n.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tag-filter"},t._l(t.tags,(function(i,s){return e("button",{key:s,staticClass:"action-button",attrs:{role:"button","aria-label":"Filter by "+i},on:{click:function(e){return e.preventDefault(),t.emitEvent(i)}}},[e("span",[t._v("# "+t._s(i))])])})),0)}),[],!1,null,null,null);e.a=a.exports},ZdVT:function(t,e,i){},iyQ6:function(t,e,i){"use strict";i.r(e);i("6fVz"),i("kQ2C");var s=i("sRiy").a,n=(i("k62q"),i("KHd+")),a=null,r=Object(n.a)(s,(function(){var t=this,e=t._self._c;return e("Layout",{attrs:{"show-back-link":!1,"toggle-view":t.showToggleView()}},[e("div",{staticClass:"index-content"},[e("TagCloud",{attrs:{event:t.removeTag(),tags:t.filter}}),0===t.computeCards.length?e("div",{staticClass:"empty-state"},[e("div",{staticClass:"empty-state__content"},[e("h2",{staticClass:"empty-state__title"},[t.view===t.FAVORITES?e("span",[t._v("No favorites yet")]):t.filter.length>0?e("span",[t._v("No paintings match your filters")]):e("span",[t._v("No paintings available")])]),e("p",{staticClass:"empty-state__message"},[t.view===t.FAVORITES?e("span",[t._v("Start adding paintings to your favorites to see them here.")]):t.filter.length>0?e("span",[t._v("Try removing some tags to see more paintings.")]):e("span",[t._v("There are currently no paintings to display.")])]),t.filter.length>0?e("button",{staticClass:"empty-state__button",attrs:{"aria-label":"Clear all filters"},on:{click:t.clearFilters}},[t._v("\n          Clear Filters\n        ")]):t._e()])]):e("div",{staticClass:"masonry"},t._l(t.computeCards,(function(t,i){return e("div",{key:t.node.id,staticClass:"cards"},[e("CardLayout",{staticClass:"card-layout",attrs:{painting:t.node,"is-first-card":0===i}})],1)})),0)],1)])}),[],!1,null,null,null);"function"==typeof a&&a(r);e.default=r.exports},k62q:function(t,e,i){"use strict";i("2dNS")},sRiy:function(t,e,i){"use strict";(function(t){i("FNk8"),i("6fVz"),i("kQ2C"),i("fVRX"),i("HnD3"),i("eaQ4"),i("waGA"),i("iwDs"),i("pOfs"),i("HlrW"),i("csNf");var s=i("JPo+"),n=i("b1t6"),a=i("ijCd"),r=i.n(a),o=i("TV5u"),l=i("3Ns0"),c=i("Gm9B"),d=i("xDbK");e.a={components:{CardLayout:l.a,TagCloud:c.a},data:()=>({view:n.a,filter:[],favorites:[]}),metaInfo(){var e,i;const s=Object(d.a)((null===(e=this.$page.metadata)||void 0===e?void 0:e.siteName)||"Gridsome Starter Wikidata")||"Gridsome Starter Wikidata",n=Object(d.a)((null===(i=this.$page.metadata)||void 0===i?void 0:i.siteDescription)||"A Gridsome starter showcasing Wikidata integration")||"A Gridsome starter showcasing Wikidata integration",a=`${Object(d.d)(t.env.GRIDSOME_SITE_URL)}${Object(d.c)(t.env.GRIDSOME_PATH_PREFIX)}/`,r=[];if(this.$page.paintings&&this.$page.paintings.edges&&this.$page.paintings.edges.length>0){const t=this.$page.paintings.edges[0].node;if(t.cover_image&&"string"==typeof t.cover_image){const e=Object(d.b)(t.cover_image);e&&r.push({rel:"preload",as:"image",href:e})}}return r.push({rel:"preconnect",href:"https://www.wikidata.org",crossorigin:"anonymous"}),{title:s,link:r,meta:[{name:"description",content:n},{property:"og:title",content:s},{property:"og:description",content:n},{property:"og:type",content:"website"},{property:"og:url",content:a},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:s},{name:"twitter:description",content:n}]}},created(){this.$eventBus.$on(s.a,this.onAddTag),this.$eventBus.$on(s.b,this.onRemoveTag),this.$eventBus.$on(s.c,this.onChangeFavorite),this.$eventBus.$on(s.d,this.onToggleView)},mounted(){this.$page.paintings&&this.$page.paintings.edges&&this.$page.paintings.edges.forEach(t=>{t.node.tags=[t.node.year,t.node.locationLabel],t.node.depicts&&(t.node.tags=t.node.tags.concat(t.node.depicts.split(","))),t.node.tags=t.node.tags.filter(t=>t),t.node.tags=[...new Set(t.node.tags)]}),Object(o.a)()&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.initMasonry()})})},watch:{computeCards:{handler(){Object(o.a)()&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.resizeAllCards()})})},deep:!1}},beforeDestroy(){this.$eventBus.$off(),Object(o.a)()&&this.masonryObserver&&this.masonryObserver.disconnect(),Object(o.a)()&&this.handleWindowResize&&window.removeEventListener("resize",this.handleWindowResize),this.resizeTimeout&&clearTimeout(this.resizeTimeout)},computed:{computeCards(){return this.$page.paintings&&this.$page.paintings.edges?this.view===n.b&&this.favorites.length>0?this.$page.paintings.edges.filter(t=>{const e=t.node.path?t.node.path.replace(/^\//,""):null;return r()(this.favorites,e)}):this.$page.paintings.edges.filter(t=>t.node.tags&&Array.isArray(t.node.tags)?t.node.tags.filter(t=>this.filter.includes(t)).length===this.filter.length:0===this.filter.length):[]}},methods:{getPaintingWithItem(t){const e=t.path?t.path.replace(/^\//,""):null;return{...t,item:e}},clearFilters(){this.filter=[]},onAddTag(t){this.filter.push(t),this.filter=[...new Set(this.filter)]},onRemoveTag(t){let e=this.filter.findIndex(e=>e===t);this.filter.splice(e,1)},onChangeFavorite(t){let e=this.favorites.findIndex(e=>e===t);-1!==e?(this.favorites.splice(e,1),0===this.favorites.length&&(this.view=n.a)):this.favorites.push(t)},onToggleView(t){this.view=t},showToggleView(){return this.favorites.length>0},removeTag:()=>s.b,initMasonry(){var t;if(!Object(o.a)())return;const e=(null===(t=this.$el)||void 0===t?void 0:t.querySelector(".masonry"))||document.querySelector(".masonry");e&&(this.masonryObserver=new ResizeObserver(t=>{const e=t[0];e&&e.contentRect&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.resizeAllCards()},150))}),this.masonryObserver.observe(e),this.handleWindowResize=()=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.resizeAllCards()},200)},window.addEventListener("resize",this.handleWindowResize,{passive:!0}),setTimeout(()=>{this.waitForImagesAndResize()},200))},waitForImagesAndResize(){var t;if(!Object(o.a)())return;const e=(null===(t=this.$el)||void 0===t?void 0:t.getElementsByClassName("cards"))||document.getElementsByClassName("cards");if(!e||0===e.length)return void requestAnimationFrame(()=>{this.resizeAllCards()});const i=[],s=Math.min(e.length,6);if(Array.from(e).slice(0,s).forEach(t=>{const e=t.querySelector("img");e&&!e.complete&&i.push(e)}),0===i.length)return void requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.resizeAllCards()})});let n=0;const a=()=>{n++,n===i.length&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.resizeAllCards()})})};i.forEach(t=>{t.complete?a():(t.addEventListener("load",a,{once:!0}),t.addEventListener("error",a,{once:!0}),setTimeout(a,3e3))}),setTimeout(()=>{this.resizeAllCards()},1e3)},resizeAllCards(){var t,e;if(!Object(o.a)())return;const i=(null===(t=this.$el)||void 0===t?void 0:t.querySelectorAll(".cards"))||document.querySelectorAll(".cards");if(0===i.length)return;const s=(null===(e=this.$el)||void 0===e?void 0:e.querySelector(".masonry"))||document.querySelector(".masonry");if(!s)return;const n=window.getComputedStyle(s),a=parseInt(n.gap||n.gridGap)||0,r=parseInt(n.gridAutoRows)||10,l=[];i.forEach(t=>{const e=t.querySelector(".card-layout");if(e){const t=e.offsetHeight;l.push(t>0?t:400)}else l.push(400)}),i.forEach(t=>{t.style.gridRowEnd="auto"}),s.offsetHeight,i.forEach((t,e)=>{const i=l[e],s=Math.ceil((i+a)/(r+a));t.style.gridRowEnd="span "+s})}}}}).call(this,i("8oxB"))},wE6H:function(t,e,i){"use strict";i("ZdVT")},xDbK:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return o}));i("iKfx"),i("JxoU"),i("VJTV");function s(t,e=["http:","https:"]){if(!t||"string"!=typeof t)return!1;try{const i=new URL(t);return e.includes(i.protocol)}catch{return!1}}function n(t,e=["http:","https:"]){if(!s(t,e))return null;try{const e=new URL(t);return e.hash="",e.toString()}catch{return null}}function a(t){return t&&"string"==typeof t&&(t.startsWith("http://")||t.startsWith("https://"))&&s(t,["https:"])?t:"https://hunsalz.github.io"}function r(t){if(!t||"string"!=typeof t)return"/gridsome-starter-wikidata";let e=t.trim();return e.startsWith("/")||(e="/"+e),e=e.replace(/\.\./g,""),e=e.split("?")[0].split("#")[0],e||"/gridsome-starter-wikidata"}function o(t,e=200){if(!t||"string"!=typeof t)return"";let i=t.replace(/<[^>]*>/g,"");return i=i.replace(/[<>"']/g,""),i=i.trim().substring(0,e),i}}}]);