(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"0C2g":function(t,e,i){"use strict";i("FE1i")},"1Swl":function(t,e,i){},"3Ns0":function(t,e,i){"use strict";var a=i("Iab2"),s=i.n(a),n=i("JPo+");var r={props:{painting:{type:Object,required:!0}},data:()=>({isFavorite:!1,errorMessage:null}),computed:{paintingItem(){return this.painting.path?this.painting.path.replace(/^\//,""):null},getWikidataLink(){return"https://www.wikidata.org/wiki/"+this.paintingItem}},methods:{toggleFavorite(t){this.isFavorite=!this.isFavorite,this.$eventBus.$emit(n.c,t)},download(){this.errorMessage=null;let t=this.painting.image||this.painting.cover_image;if(!t)return this.errorMessage="Image not available for download",void setTimeout(()=>{this.errorMessage=null},3e3);let e="string"==typeof t?t:t.src||t;if(!e)return this.errorMessage="Invalid image URL. Unable to download.",void setTimeout(()=>{this.errorMessage=null},3e3);try{let t=e.split("/").pop().split("?")[0];t=decodeURI(t).replace(/%2C/g,","),s.a.saveAs(e,t)}catch{this.errorMessage="Failed to download image. Please try again.",setTimeout(()=>{this.errorMessage=null},3e3)}}}},o=(i("Bi2f"),i("KHd+")),l={components:{ActionBar:Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"action-bar"},[t.errorMessage?e("div",{staticClass:"action-bar__error",attrs:{role:"alert"}},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]):t._e(),e("button",{staticClass:"action-button",class:{"is-favorite":t.isFavorite},attrs:{"data-favorite":t.isFavorite,role:"button","aria-label":"Toggle favorite"},on:{click:function(e){return e.preventDefault(),t.toggleFavorite(t.paintingItem)}}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}})])]),e("g-link",{staticClass:"action-button",attrs:{to:t.getWikidataLink}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}})])]),e("button",{staticClass:"action-button",attrs:{role:"button","aria-label":"Download image"},on:{click:function(e){return e.preventDefault(),t.download()}}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"}})])])],1)}),[],!1,null,null,null).exports,TagCloud:i("Gm9B").a},props:{painting:{type:Object,required:!0}},methods:{addTag:()=>n.a,getTags(){return this.painting.tags?this.painting.tags:[]}}},c=(i("eQse"),Object(o.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-layout"},[e("div",{staticClass:"card-layout__header"},[t.painting.cover_image?e("g-image",{attrs:{src:t.painting.cover_image,alt:t.painting.paintingLabel?t.painting.paintingLabel+" - Cover image":"Artwork cover image",loading:"lazy"}}):t._e()],1),e("div",{staticClass:"card-layout__content"},[e("h2",{staticClass:"card-layout__title"},[t._v(t._s(t.painting.paintingLabel))]),e("div",[t._v("Year: "+t._s(t.painting.year))]),e("div",[t._v("Collection: "+t._s(t.painting.locationLabel))]),e("div",[t._v("Material: "+t._s(t.painting.materials))]),e("TagCloud",{staticClass:"card-layout__tags",attrs:{event:t.addTag(),tags:t.getTags()}}),e("ActionBar",{staticClass:"card-layout__actions",attrs:{painting:t.painting}})],1),e("g-link",{staticClass:"card-layout__link_to_painting",attrs:{to:t.painting.path}})],1)}),[],!1,null,null,null));e.a=c.exports},"4XLb":function(t,e,i){"use strict";i("1Swl")},Bi2f:function(t,e,i){"use strict";i("Lxbo")},FE1i:function(t,e,i){},Gm9B:function(t,e,i){"use strict";var a={props:{event:{type:String,required:!0},tags:{type:Array,required:!0}},methods:{emitEvent(t){this.$eventBus.$emit(this.event,t)}}},s=(i("0C2g"),i("KHd+")),n=Object(s.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tag-filter"},t._l(t.tags,(function(i,a){return e("button",{key:a,staticClass:"action-button",attrs:{role:"button","aria-label":"Tag"},on:{click:function(e){return e.preventDefault(),t.emitEvent(i)}}},[e("span",[t._v("# "+t._s(i))])])})),0)}),[],!1,null,null,null);e.a=n.exports},Lxbo:function(t,e,i){},ZR7C:function(t,e,i){},eQse:function(t,e,i){"use strict";i("ZR7C")},iyQ6:function(t,e,i){"use strict";i.r(e);i("6fVz"),i("kQ2C");var a=i("sRiy").a,s=(i("4XLb"),i("KHd+")),n=null,r=Object(s.a)(a,(function(){var t=this,e=t._self._c;return e("Layout",{attrs:{"show-back-link":!1,"toggle-view":t.showToggleView()}},[e("div",{staticClass:"index-content"},[e("TagCloud",{attrs:{event:t.removeTag(),tags:t.filter}}),0===t.computeCards.length?e("div",{staticClass:"empty-state"},[e("div",{staticClass:"empty-state__content"},[e("h2",{staticClass:"empty-state__title"},[t.view===t.FAVORITES?e("span",[t._v("No favorites yet")]):t.filter.length>0?e("span",[t._v("No paintings match your filters")]):e("span",[t._v("No paintings available")])]),e("p",{staticClass:"empty-state__message"},[t.view===t.FAVORITES?e("span",[t._v("Start adding paintings to your favorites to see them here.")]):t.filter.length>0?e("span",[t._v("Try removing some tags to see more paintings.")]):e("span",[t._v("There are currently no paintings to display.")])]),t.filter.length>0?e("button",{staticClass:"empty-state__button",attrs:{"aria-label":"Clear all filters"},on:{click:t.clearFilters}},[t._v("\n          Clear Filters\n        ")]):t._e()])]):e("div",{staticClass:"masonry"},t._l(t.computeCards,(function(t){return e("div",{key:t.node.id,staticClass:"cards"},[e("CardLayout",{staticClass:"card-layout",attrs:{painting:t.node}})],1)})),0)],1)])}),[],!1,null,null,null);"function"==typeof n&&n(r);e.default=r.exports},sRiy:function(t,e,i){"use strict";(function(t){i("FNk8"),i("6fVz"),i("kQ2C"),i("fVRX"),i("HnD3"),i("eaQ4"),i("waGA"),i("iwDs"),i("pOfs"),i("HlrW"),i("csNf");var a=i("3Ns0"),s=i("Gm9B"),n=i("JPo+"),r=i("b1t6"),o=i("LvDl"),l=i("TV5u");e.a={components:{CardLayout:a.a,TagCloud:s.a},data:()=>({view:r.a,filter:[],favorites:[]}),metaInfo(){var e,i;const a=(null===(e=this.$page.metadata)||void 0===e?void 0:e.siteName)||"Gridsome Starter Wikidata",s=(null===(i=this.$page.metadata)||void 0===i?void 0:i.siteDescription)||"A Gridsome starter showcasing Wikidata integration";return{title:a,meta:[{name:"description",content:s},{property:"og:title",content:a},{property:"og:description",content:s},{property:"og:type",content:"website"},{property:"og:url",content:`${t.env.GRIDSOME_SITE_URL||"https://hunsalz.github.io"}${t.env.GRIDSOME_PATH_PREFIX||"/gridsome-starter-wikidata"}/`},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:a},{name:"twitter:description",content:s}]}},created:function(){if(this.$eventBus.$on(n.a,this.onAddTag),this.$eventBus.$on(n.b,this.onRemoveTag),this.$eventBus.$on(n.c,this.onChangeFavorite),this.$eventBus.$on(n.d,this.onToggleView),Object(l.a)()){this.debouncedResizeAllCards=Object(o.debounce)(this.resizeAllCards.bind(this),250);let t=this;["load","resize"].forEach((function(e){window.addEventListener(e,t.debouncedResizeAllCards)}))}},mounted(){if(this.$page.paintings&&this.$page.paintings.edges&&this.$page.paintings.edges.forEach(t=>{t.node.tags=[t.node.year,t.node.locationLabel],t.node.depicts&&(t.node.tags=t.node.tags.concat(t.node.depicts.split(","))),t.node.tags=t.node.tags.filter(t=>t),t.node.tags=[...new Set(t.node.tags)]}),Object(l.a)()){let t=this;this.$nextTick((function(){t.resizeAllCards()}))}},watch:{view(){if(Object(l.a)()){let t=this;this.$nextTick((function(){t.resizeAllCards()}))}},filter(){if(Object(l.a)()){let t=this;this.$nextTick((function(){t.resizeAllCards()}))}}},beforeDestroy(){if(this.$eventBus.$off(),Object(l.a)()&&this.debouncedResizeAllCards){let t=this;["load","resize"].forEach((function(e){window.removeEventListener(e,t.debouncedResizeAllCards)})),this.debouncedResizeAllCards.cancel()}},computed:{computeCards:function(){return this.$page.paintings&&this.$page.paintings.edges?this.view===r.b&&this.favorites.length>0?this.$page.paintings.edges.filter(t=>{const e=t.node.path?t.node.path.replace(/^\//,""):null;return Object(o.includes)(this.favorites,e)}):this.$page.paintings.edges.filter(t=>t.node.tags&&Array.isArray(t.node.tags)?t.node.tags.filter(t=>this.filter.includes(t)).length===this.filter.length:0===this.filter.length):[]}},methods:{getPaintingWithItem(t){const e=t.path?t.path.replace(/^\//,""):null;return{...t,item:e}},clearFilters(){this.filter=[]},onAddTag(t){this.filter.push(t),this.filter=[...new Set(this.filter)]},onRemoveTag(t){let e=this.filter.findIndex(e=>e===t);this.filter.splice(e,1)},onChangeFavorite(t){let e=this.favorites.findIndex(e=>e===t);-1!==e?(this.favorites.splice(e,1),0===this.favorites.length&&(this.view=r.a)):this.favorites.push(t)},onToggleView(t){this.view=t},showToggleView(){return this.favorites.length>0},removeTag:()=>n.b,resizeCard(t){if(!t)return;let e=document.getElementsByClassName("masonry")[0];if(!e)return;let i=t.querySelector(".card-layout");if(!i)return;let a=parseInt(window.getComputedStyle(e).getPropertyValue("grid-row-gap"))||0,s=parseInt(window.getComputedStyle(e).getPropertyValue("grid-auto-rows"))||10,n=Math.ceil((i.getBoundingClientRect().height+a)/(s+a));n>0&&(t.style.gridRowEnd="span "+n)},resizeAllCards(){if(!Object(l.a)())return;let t=document.getElementsByClassName("cards");t&&0!==t.length&&Array.from(t).forEach(t=>this.resizeCard(t))}}}}).call(this,i("8oxB"))}}]);