(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/b2C":function(t,e,i){},"3Ns0":function(t,e,i){"use strict";var a=i("Gm9B"),n=i("JPo+"),s={components:{ActionBar:()=>Promise.all([i.e(0),i.e(6)]).then(i.bind(null,"KU0p")),TagCloud:a.a},props:{painting:{type:Object,required:!0}},methods:{addTag:()=>n.a,getTags(){return this.painting.tags?this.painting.tags:[]}}},r=(i("g2SM"),i("KHd+")),o=Object(r.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-layout"},[e("div",{staticClass:"card-layout__header"},[t.painting.cover_image?e("g-image",{attrs:{src:t.painting.cover_image,alt:t.painting.paintingLabel?t.painting.paintingLabel+" - Cover image":"Artwork cover image",width:"770",height:"380",loading:"lazy"}}):t._e()],1),e("div",{staticClass:"card-layout__content"},[e("h2",{staticClass:"card-layout__title"},[t._v(t._s(t.painting.paintingLabel))]),e("div",[t._v("Year: "+t._s(t.painting.year))]),e("div",[t._v("Collection: "+t._s(t.painting.locationLabel))]),e("div",[t._v("Material: "+t._s(t.painting.materials))]),e("TagCloud",{staticClass:"card-layout__tags",attrs:{event:t.addTag(),tags:t.getTags()}}),e("ActionBar",{staticClass:"card-layout__actions",attrs:{painting:t.painting}})],1),e("g-link",{staticClass:"card-layout__link_to_painting",attrs:{to:t.painting.path}})],1)}),[],!1,null,null,null);e.a=o.exports},"5CNJ":function(t,e,i){"use strict";i("/b2C")},Gm9B:function(t,e,i){"use strict";var a={props:{event:{type:String,required:!0},tags:{type:Array,required:!0}},methods:{emitEvent(t){this.$eventBus.$emit(this.event,t)}}},n=(i("5CNJ"),i("KHd+")),s=Object(n.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tag-filter"},t._l(t.tags,(function(i,a){return e("button",{key:a,staticClass:"action-button",attrs:{role:"button","aria-label":"Tag"},on:{click:function(e){return e.preventDefault(),t.emitEvent(i)}}},[e("span",[t._v("# "+t._s(i))])])})),0)}),[],!1,null,null,null);e.a=s.exports},"Kfw+":function(t,e,i){},Rwkw:function(t,e,i){"use strict";i("Kfw+")},Sfgu:function(t,e,i){},g2SM:function(t,e,i){"use strict";i("Sfgu")},iyQ6:function(t,e,i){"use strict";i.r(e);i("6fVz"),i("kQ2C");var a=i("sRiy").a,n=(i("Rwkw"),i("KHd+")),s=null,r=Object(n.a)(a,(function(){var t=this,e=t._self._c;return e("Layout",{attrs:{"show-back-link":!1,"toggle-view":t.showToggleView()}},[e("div",{staticClass:"index-content"},[e("TagCloud",{attrs:{event:t.removeTag(),tags:t.filter}}),0===t.computeCards.length?e("div",{staticClass:"empty-state"},[e("div",{staticClass:"empty-state__content"},[e("h2",{staticClass:"empty-state__title"},[t.view===t.FAVORITES?e("span",[t._v("No favorites yet")]):t.filter.length>0?e("span",[t._v("No paintings match your filters")]):e("span",[t._v("No paintings available")])]),e("p",{staticClass:"empty-state__message"},[t.view===t.FAVORITES?e("span",[t._v("Start adding paintings to your favorites to see them here.")]):t.filter.length>0?e("span",[t._v("Try removing some tags to see more paintings.")]):e("span",[t._v("There are currently no paintings to display.")])]),t.filter.length>0?e("button",{staticClass:"empty-state__button",attrs:{"aria-label":"Clear all filters"},on:{click:t.clearFilters}},[t._v("\n          Clear Filters\n        ")]):t._e()])]):e("div",{staticClass:"masonry"},t._l(t.computeCards,(function(t){return e("div",{key:t.node.id,staticClass:"cards"},[e("CardLayout",{staticClass:"card-layout",attrs:{painting:t.node}})],1)})),0)],1)])}),[],!1,null,null,null);"function"==typeof s&&s(r);e.default=r.exports},sRiy:function(t,e,i){"use strict";(function(t){i("FNk8"),i("6fVz"),i("kQ2C"),i("fVRX"),i("HnD3"),i("eaQ4"),i("waGA"),i("iwDs"),i("pOfs"),i("HlrW"),i("csNf");var a=i("JPo+"),n=i("b1t6"),s=i("sEfC"),r=i.n(s),o=i("ijCd"),l=i.n(o),c=i("TV5u"),d=i("3Ns0"),g=i("Gm9B");e.a={components:{CardLayout:d.a,TagCloud:g.a},data:()=>({view:n.a,filter:[],favorites:[]}),metaInfo(){var e,i;const a=(null===(e=this.$page.metadata)||void 0===e?void 0:e.siteName)||"Gridsome Starter Wikidata",n=(null===(i=this.$page.metadata)||void 0===i?void 0:i.siteDescription)||"A Gridsome starter showcasing Wikidata integration",s=`${t.env.GRIDSOME_SITE_URL||"https://hunsalz.github.io"}${t.env.GRIDSOME_PATH_PREFIX||"/gridsome-starter-wikidata"}/`,r=[];if(this.$page.paintings&&this.$page.paintings.edges&&this.$page.paintings.edges.length>0){const t=this.$page.paintings.edges[0].node;t.cover_image&&"string"==typeof t.cover_image&&r.push({rel:"preload",as:"image",href:t.cover_image})}return r.push({rel:"preconnect",href:"https://www.wikidata.org",crossorigin:"anonymous"}),{title:a,link:r,meta:[{name:"description",content:n},{property:"og:title",content:a},{property:"og:description",content:n},{property:"og:type",content:"website"},{property:"og:url",content:s},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:a},{name:"twitter:description",content:n}]}},created(){if(this.$eventBus.$on(a.a,this.onAddTag),this.$eventBus.$on(a.b,this.onRemoveTag),this.$eventBus.$on(a.c,this.onChangeFavorite),this.$eventBus.$on(a.d,this.onToggleView),Object(c.a)()){this.debouncedResizeAllCards=r()(this.waitForImagesAndResize.bind(this),150);let t=this;["load","resize"].forEach((function(e){window.addEventListener(e,t.debouncedResizeAllCards)}))}},mounted(){if(this.$page.paintings&&this.$page.paintings.edges&&this.$page.paintings.edges.forEach(t=>{t.node.tags=[t.node.year,t.node.locationLabel],t.node.depicts&&(t.node.tags=t.node.tags.concat(t.node.depicts.split(","))),t.node.tags=t.node.tags.filter(t=>t),t.node.tags=[...new Set(t.node.tags)]}),Object(c.a)()){let t=this;this.$nextTick((function(){t.waitForImagesAndResize()}))}},watch:{view(){if(Object(c.a)()){let t=this;this.$nextTick((function(){t.waitForImagesAndResize()}))}},filter(){if(Object(c.a)()){let t=this;this.$nextTick((function(){t.waitForImagesAndResize()}))}},computeCards:{handler(){if(Object(c.a)()){let t=this;this.$nextTick((function(){t.waitForImagesAndResize()}))}},deep:!1}},beforeDestroy(){if(this.$eventBus.$off(),Object(c.a)()&&this.debouncedResizeAllCards){let t=this;["load","resize"].forEach((function(e){window.removeEventListener(e,t.debouncedResizeAllCards)})),this.debouncedResizeAllCards.cancel()}},computed:{computeCards(){return this.$page.paintings&&this.$page.paintings.edges?this.view===n.b&&this.favorites.length>0?this.$page.paintings.edges.filter(t=>{const e=t.node.path?t.node.path.replace(/^\//,""):null;return l()(this.favorites,e)}):this.$page.paintings.edges.filter(t=>t.node.tags&&Array.isArray(t.node.tags)?t.node.tags.filter(t=>this.filter.includes(t)).length===this.filter.length:0===this.filter.length):[]}},methods:{getPaintingWithItem(t){const e=t.path?t.path.replace(/^\//,""):null;return{...t,item:e}},clearFilters(){this.filter=[]},onAddTag(t){this.filter.push(t),this.filter=[...new Set(this.filter)]},onRemoveTag(t){let e=this.filter.findIndex(e=>e===t);this.filter.splice(e,1)},onChangeFavorite(t){let e=this.favorites.findIndex(e=>e===t);-1!==e?(this.favorites.splice(e,1),0===this.favorites.length&&(this.view=n.a)):this.favorites.push(t)},onToggleView(t){this.view=t},showToggleView(){return this.favorites.length>0},removeTag:()=>a.b,resizeCard(t){if(!t)return;const e=document.getElementsByClassName("masonry")[0];if(!e)return;const i=t.querySelector(".card-layout");if(!i)return;t.style.gridRowEnd="auto",t.offsetHeight;const a=parseInt(window.getComputedStyle(e).getPropertyValue("grid-row-gap"))||0,n=parseInt(window.getComputedStyle(e).getPropertyValue("grid-auto-rows"))||10,s=i.getBoundingClientRect().height;if(s<=0)return;const r=Math.ceil((s+a)/(n+a));r>0&&(t.style.gridRowEnd="span "+r)},waitForImagesAndResize(){if(!Object(c.a)())return;const t=document.getElementsByClassName("cards");if(!t||0===t.length)return void this.resizeAllCards();const e=[];if(Array.from(t).forEach(t=>{const i=t.querySelector("img");i&&!i.complete&&e.push(i)}),0===e.length)return void this.resizeAllCards();let i=0;const a=()=>{i++,i===e.length&&setTimeout(()=>{this.resizeAllCards()},50)};e.forEach(t=>{t.complete?a():(t.addEventListener("load",a,{once:!0}),t.addEventListener("error",a,{once:!0}))})},resizeAllCards(){if(!Object(c.a)())return;const t=document.getElementsByClassName("cards");t&&0!==t.length&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Array.from(t).forEach(t=>{t.style.gridRowEnd="auto"}),Array.from(t).forEach(t=>this.resizeCard(t))})})}}}}).call(this,i("8oxB"))}}]);